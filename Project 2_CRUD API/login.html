<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-sky-300 via-indigo-400 to-violet-600 flex items-center justify-center p-6">
  <main class="w-full max-w-5xl bg-white/10 backdrop-blur-md rounded-3xl shadow-2xl flex overflow-hidden">
    <!-- Panel Informasi Perusahaan -->
    <div class="hidden md:flex w-1/2 bg-indigo-700/30 backdrop-blur-md flex-col items-center justify-center p-8 text-white">
      
      <!-- Logo SVG -->
      <div class="mb-6">
        <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="60" cy="60" r="58" stroke="#1D4ED8" stroke-width="4" fill="url(#grad1)"/>
          <path d="M60 30 C75 35, 80 60, 60 80 C40 60, 45 35, 60 30 Z" fill="#10B981"/>
          <polygon points="58,35 68,55 58,55 62,75 52,55 62,55" fill="#FBBF24"/>
          <defs>
            <linearGradient id="grad1" x1="0" y1="0" x2="120" y2="120" gradientUnits="userSpaceOnUse">
              <stop offset="0%" stop-color="#3B82F6"/>
              <stop offset="100%" stop-color="#9333EA"/>
            </linearGradient>
          </defs>
        </svg>
      </div>

      <h2 class="text-3xl font-bold mb-2 text-center">PT Nusantara Energi Lestari</h2>
      <p class="text-center text-white/80 mb-4">Menyediakan solusi energi berkelanjutan dengan inovasi dan layanan terbaik.</p>
      <ul class="text-white/80 space-y-2 text-sm">
        <li><strong>Alamat:</strong> Jl. Energi No. 23, Ciparay</li>
        <li><strong>Telepon:</strong> 0831-3181-1032</li>
        <li><strong>Email:</strong> gilangrmdhn05@gmail.com</li>
        <li><strong>Website:</strong> www.nusantaraenergi.com</li>
      </ul>
    </div>
    
    <div class="w-full md:w-1/2 flex items-center justify-center p-8 md:p-10">
    <form id="loginForm" class="w-full bg-white/5 rounded-2xl p-6 md:p-8 backdrop-blur-sm border border-white/6" novalidate>
        <h1 class="text-2xl font-bold text-white mb-1 text-center">Masuk ke akun Anda</h1>
        <p class="text-sm text-white/80 mb-6 text-center">Masukkan email dan kata sandi untuk melanjutkan.</p>

        <label class="block mb-4">
          <span class="text-sm text-white/80">Email</span>
          <input type="email" name="email" id="email" required placeholder="nama@domain.com" class="mt-1 block w-full rounded-lg px-4 py-3 bg-white/6 border border-white/8 placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-300" />
          <p class="mt-1 text-xs text-rose-300 hidden" id="emailError">Masukkan email yang valid.</p>
        </label>

        <label class="block mb-4 relative">
          <span class="text-sm text-white/80">Kata sandi</span>
          <input type="password" name="password" id="password" required minlength="6" placeholder="Minimal 6 karakter" class="mt-1 block w-full rounded-lg px-4 py-3 bg-white/6 border border-white/8 placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-300 pr-14" />
          <button type="button" id="togglePass" class="absolute right-3 top-9 text-white/70 text-sm px-2 py-1 rounded">Tampilkan</button>
          <p class="mt-1 text-xs text-rose-300 hidden" id="passError">Kata sandi minimal 6 karakter.</p>
        </label>

        <div class="flex items-center justify-between mb-6">
          <label class="inline-flex items-center gap-2 text-white/80">
            <input type="checkbox" name="remember" class="w-4 h-4 rounded bg-white/6 border-white/8" />
            <span class="text-sm">Ingat saya</span>
          </label>
          <a href="#" class="text-sm text-white/90 underline">Lupa kata sandi?</a>
        </div>

        <button type="submit" class="w-full py-3 rounded-lg font-semibold bg-gradient-to-r from-indigo-500 to-violet-500 shadow-lg hover:scale-[1.01] transform transition">Masuk</button>

        <p class="mt-6 text-center text-sm text-white/70">Belum punya akun? <a href="register.html" class="font-semibold underline text-white/95">Daftar sekarang</a></p>
      </form>
    </div>
  </main>

  <script>
    const apiUrl = "http://localhost:3000/users";
    const toggle = document.getElementById('togglePass');
    const pass = document.getElementById('password');
    toggle.addEventListener('click', () => {
      if (pass.type === 'password') { pass.type = 'text'; toggle.textContent = 'Sembunyikan'; }
      else { pass.type = 'password'; toggle.textContent = 'Tampilkan'; }
    });

    const form = document.getElementById('loginForm');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const emailError = document.getElementById('emailError');
    const passError = document.getElementById('passError');

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      let ok = true;

      if (!emailInput.value || !/^\S+@\S+\.\S+$/.test(emailInput.value)) { emailError.classList.remove('hidden'); ok = false; } else { emailError.classList.add('hidden'); }
      if (!passwordInput.value || passwordInput.value.length < 6) { passError.classList.remove('hidden'); ok = false; } else { passError.classList.add('hidden'); }
      if (!ok) return;

      // Fetch users dari API
      fetch(apiUrl)
        .then(res => res.json())
        .then(users => {
          const user = users.find(u => u.email === emailInput.value && u.password === passwordInput.value);
          if (!user) {
            alert("Email atau kata sandi salah!");
            return;
          }
          const btn = form.querySelector('button[type="submit"]');
      btn.disabled = true; 
      btn.textContent = 'Memproses...';

      setTimeout(() => {
        window.location.href = "dashboard.html";
      }, 900);
        })
        .catch(err => {
          console.error(err);
          alert("Gagal login. Pastikan server API berjalan.");
        });
    });
  </script>
</body>
</html>
